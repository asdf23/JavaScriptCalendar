<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dynamic Div Positioning</title>
<style>
    #dynamicDiv {
        position: absolute;
        background-color: #f0f0f0;
        border: 1px solid #ccc;
    }
</style>
</head>
<body>
<div id="dynamicDiv"></div>

<script>
    // Function to create and position the calendar
    function createCalendar(width, height, x, y) {
        var dynamicDiv = document.getElementById('dynamicDiv');
        var calendarID = 'calendar' + findExistingCalendars();
        
        // Constants for offsets
        var offsetLeft = 10;
        var offsetRight = 10;
        var offsetTop = 10;
        var offsetBottom = 0;
        
        // Calculate the width and height of rectDay & rectDate
	var rectDayWidthPercentage = (100 - (offsetLeft + offsetRight)) / 7;
	var rectDayHeightPercentage = 100 / 6;
	var rectDateWidthPercentage = rectDayWidthPercentage * 0.25;
	var rectDateHeightPercentage = rectDayHeightPercentage * 0.25;
	

        
        // Create the calendar div
        var calendarDiv = document.createElement('div');
        calendarDiv.setAttribute('id', calendarID);
        calendarDiv.style.width = width + 'px';
        calendarDiv.style.height = height + 'px';
        calendarDiv.style.left = x + 'px';
        calendarDiv.style.top = y + 'px';
        calendarDiv.style.border = '1px solid black'; // Adding border
        
        // Create and append the SVG element
        var svgElement = document.createElementNS("http://www.w3.org/2000/svg", "svg");
	svgElement.setAttribute("width", "100%"); // Set width to 100% of the container
	svgElement.setAttribute("height", "100%"); // Set height to 100% of the container
	//svgElement.setAttribute("viewBox", `0 0 100 100`); // Set viewBox attribute
        
        // Create and append the <defs> tag
        var defsElement = document.createElementNS("http://www.w3.org/2000/svg", "defs");
        svgElement.appendChild(defsElement);
        
        // Create and append the <g> tag inside <defs>
        var gElement = document.createElementNS("http://www.w3.org/2000/svg", "g");
        gElement.setAttribute("id", "calendarDate");
        defsElement.appendChild(gElement);
        
        // Create and append the <rect> tag (rectDay) inside <g>
        var rectDay = document.createElementNS("http://www.w3.org/2000/svg", "rect");
        rectDay.setAttribute("x", "0"); // Set x to 0
        rectDay.setAttribute("y", "0"); // Set y to 0
        rectDay.setAttribute("width", `${rectDayWidthPercentage}%`); // Set width to calculated width
        rectDay.setAttribute("height", `${rectDayHeightPercentage}%`); // Set height to calculated height
        rectDay.setAttribute("fill", "lightgrey"); // Set fill color
        gElement.appendChild(rectDay);
        
        // Create and append the <rect> tag (rectDate) inside <g>
        var rectDate = document.createElementNS("http://www.w3.org/2000/svg", "rect");
        rectDate.setAttribute("x", "0"); // Set x to 0
        rectDate.setAttribute("y", "0"); // Set y to 0
        rectDate.setAttribute("width", `${rectDateWidthPercentage}%`);
        rectDate.setAttribute("height", `${rectDateHeightPercentage}%`);
        rectDate.setAttribute("fill", "lightblue"); // Set fill color
        gElement.appendChild(rectDate);
        
        // Create and append the <text> tag inside <g>
        var textElement = document.createElementNS("http://www.w3.org/2000/svg", "text");
        textElement.textContent = "0";
        textElement.setAttribute("x", "50%"); // Centering the text horizontally
        textElement.setAttribute("y", "50%"); // Centering the text vertically
        textElement.setAttribute("dominant-baseline", "middle"); // Adjusting the baseline
        textElement.setAttribute("text-anchor", "middle"); // Adjusting the anchor point
        gElement.appendChild(textElement);
        
        // Create and append the <use> tag to display calendarDate
        var useElement = document.createElementNS("http://www.w3.org/2000/svg", "use");
        useElement.setAttributeNS("http://www.w3.org/1999/xlink", "xlink:href", "#calendarDate");
        svgElement.appendChild(useElement);
        
        // Append the SVG element to the calendar div
        calendarDiv.appendChild(svgElement);
        
        // Append the calendar div to the dynamicDiv
        dynamicDiv.appendChild(calendarDiv);
    }

    // Function to find existing calendar divs and return the highest number
    function findExistingCalendars() {
        var highestNumber = 0;
        var calendarDivs = document.querySelectorAll('div[id^="calendar"]');
        calendarDivs.forEach(function(div) {
            var id = parseInt(div.id.replace('calendar', ''));
            if (id > highestNumber) {
                highestNumber = id;
            }
        });
        return highestNumber + 1; // Incrementing to get the next available number
    }

    // Function to initialize the page
    function init() {
        // Constants for width, height, x, and y
        //var width = window.innerWidth;
        //var height = window.innerHeight;
        var width = 400;
        var height = 50;
        var x = 300;
        var y = 400;
        
        // Call createCalendar with the constants
        createCalendar(width, height, x, y);
    }

    // Call the init function when the page loads
    window.onload = function() {
        init();
    };
</script>
</body>
</html>
